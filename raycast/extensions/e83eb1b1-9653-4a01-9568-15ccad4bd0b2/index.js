"use strict";var jt=Object.create;var ce=Object.defineProperty;var zt=Object.getOwnPropertyDescriptor;var Gt=Object.getOwnPropertyNames;var Kt=Object.getPrototypeOf,Ht=Object.prototype.hasOwnProperty;var Jt=(r,e)=>{for(var t in e)ce(r,t,{get:e[t],enumerable:!0})},He=(r,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of Gt(e))!Ht.call(r,s)&&s!==t&&ce(r,s,{get:()=>e[s],enumerable:!(n=zt(e,s))||n.enumerable});return r};var Q=(r,e,t)=>(t=r!=null?jt(Kt(r)):{},He(e||!r||!r.__esModule?ce(t,"default",{value:r,enumerable:!0}):t,r)),Zt=r=>He(ce({},"__esModule",{value:!0}),r);var tn={};Jt(tn,{default:()=>Nt});module.exports=Zt(tn);var v=require("@raycast/api");var k=Q(require("react")),w=require("@raycast/api");var Je=Object.prototype.hasOwnProperty;function ue(r,e){var t,n;if(r===e)return!0;if(r&&e&&(t=r.constructor)===e.constructor){if(t===Date)return r.getTime()===e.getTime();if(t===RegExp)return r.toString()===e.toString();if(t===Array){if((n=r.length)===e.length)for(;n--&&ue(r[n],e[n]););return n===-1}if(!t||typeof r=="object"){n=0;for(t in r)if(Je.call(r,t)&&++n&&!Je.call(e,t)||!(t in e)||!ue(r[t],e[t]))return!1;return Object.keys(e).length===n}}return r!==r&&e!==e}var Y=Q(require("node:fs")),fe=Q(require("node:path")),rt=Q(require("node:crypto")),nt=Q(require("node:child_process")),st=require("node:buffer"),ee=Q(require("node:stream")),at=require("node:util");var it=require("react/jsx-runtime");var ot=require("node:url"),ke=globalThis;function Yt(r){let e=(0,k.useRef)(r),t=(0,k.useRef)(0);return ue(r,e.current)||(e.current=r,t.current+=1),(0,k.useMemo)(()=>e.current,[t.current])}function M(r){let e=(0,k.useRef)(r);return e.current=r,e}function Xt(r,e){let t=r instanceof Error?r.message:String(r);return(0,w.showToast)({style:w.Toast.Style.Failure,title:e?.title??"Something went wrong",message:e?.message??t,primaryAction:e?.primaryAction??Ze(r),secondaryAction:e?.primaryAction?Ze(r):void 0})}var Ze=r=>{let e=!0,t="[Extension Name]...",n="";try{let i=JSON.parse((0,Y.readFileSync)((0,fe.join)(w.environment.assetsPath,"..","package.json"),"utf8"));t=`[${i.title}]...`,n=`https://raycast.com/${i.owner||i.author}/${i.name}`,(!i.owner||i.access==="public")&&(e=!1)}catch{}let s=w.environment.isDevelopment||e,a=r instanceof Error?r?.stack||r?.message||"":String(r);return{title:s?"Copy Logs":"Report Error",onAction(i){i.hide(),s?w.Clipboard.copy(a):(0,w.open)(`https://github.com/raycast/extensions/issues/new?&labels=extension%2Cbug&template=extension_bug_report.yml&title=${encodeURIComponent(t)}&extension-url=${encodeURI(n)}&description=${encodeURIComponent(`#### Error:
\`\`\`
${a}
\`\`\`
`)}`)}}};function Te(r,e,t){let n=(0,k.useRef)(0),[s,a]=(0,k.useState)({isLoading:!0}),i=M(r),o=M(t?.abortable),c=M(e||[]),u=M(t?.onError),l=M(t?.onData),f=M(t?.onWillExecute),d=M(t?.failureToastOptions),b=M(s.data),y=(0,k.useRef)(null),m=(0,k.useRef)({page:0}),S=(0,k.useRef)(!1),g=(0,k.useRef)(!0),x=(0,k.useRef)(50),E=(0,k.useCallback)(()=>(o.current&&(o.current.current?.abort(),o.current.current=new AbortController),++n.current),[o]),A=(0,k.useCallback)((...B)=>{let _=E();f.current?.(B),a($=>({...$,isLoading:!0}));let Z=Qt(i.current)(...B);function R($){return $.name=="AbortError"||_===n.current&&(u.current?u.current($):w.environment.launchType!==w.LaunchType.Background&&Xt($,{title:"Failed to fetch latest data",primaryAction:{title:"Retry",onAction(V){V.hide(),y.current?.(...c.current||[])}},...d.current}),a({error:$,isLoading:!1})),$}return typeof Z=="function"?(S.current=!0,Z(m.current).then(({data:$,hasMore:V,cursor:Wt})=>(_===n.current&&(m.current&&(m.current.cursor=Wt,m.current.lastItem=$?.[$.length-1]),l.current&&l.current($,m.current),V&&(x.current=$.length),g.current=V,a(Vt=>m.current.page===0?{data:$,isLoading:!1}:{data:(Vt.data||[])?.concat($),isLoading:!1})),$),$=>(g.current=!1,R($)))):(S.current=!1,Z.then($=>(_===n.current&&(l.current&&l.current($),a({data:$,isLoading:!1})),$),R))},[l,u,c,i,a,y,f,m,d,E]);y.current=A;let U=(0,k.useCallback)(()=>{m.current={page:0};let B=c.current||[];return A(...B)},[A,c]),F=(0,k.useCallback)(async(B,_)=>{let Z;try{if(_?.optimisticUpdate){E(),typeof _?.rollbackOnError!="function"&&_?.rollbackOnError!==!1&&(Z=structuredClone(b.current?.value));let R=_.optimisticUpdate;a($=>({...$,data:R($.data)}))}return await B}catch(R){if(typeof _?.rollbackOnError=="function"){let $=_.rollbackOnError;a(V=>({...V,data:$(V.data)}))}else _?.optimisticUpdate&&_?.rollbackOnError!==!1&&a($=>({...$,data:Z}));throw R}finally{_?.shouldRevalidateAfter!==!1&&(w.environment.launchType===w.LaunchType.Background||w.environment.commandMode==="menu-bar"?await U():U())}},[U,b,a,E]),P=(0,k.useCallback)(()=>{m.current.page+=1;let B=c.current||[];A(...B)},[m,c,A]);(0,k.useEffect)(()=>{m.current={page:0},t?.execute!==!1?A(...e||[]):E()},[Yt([e,t?.execute,A]),o,m]),(0,k.useEffect)(()=>()=>{E()},[E]);let N=t?.execute!==!1?s.isLoading:!1,W={...s,isLoading:N},oe=S.current?{pageSize:x.current,hasMore:g.current,onLoadMore:P}:void 0;return{...W,revalidate:U,mutate:F,pagination:oe}}function Qt(r){return r===Promise.all||r===Promise.race||r===Promise.resolve||r===Promise.reject?r.bind(Promise):r}function Ye(r){return typeof r!="function"?!1:/^function\s+\w*\s*\(\s*\)\s*{\s+\[native code\]\s+}$/i.exec(Function.prototype.toString.call(r))!==null}function qt(r){return r instanceof URLSearchParams?r.toString():r}function ct(r,e=[]){function t(n){return"update"in r?r.update(n,"utf8"):r.write(n)}return{dispatch:function(n){n=qt(n),n===null?this._null():this["_"+typeof n](n)},_object:function(n){let s=/\[object (.*)\]/i,a=Object.prototype.toString.call(n),i=s.exec(a)?.[1]??"unknown:["+a+"]";i=i.toLowerCase();let o=null;if((o=e.indexOf(n))>=0){this.dispatch("[CIRCULAR:"+o+"]");return}else e.push(n);if(Buffer.isBuffer(n))return t("buffer:"),t(n.toString("utf8"));if(i!=="object"&&i!=="function"&&i!=="asyncfunction")if(this["_"+i])this["_"+i](n);else throw new Error('Unknown object type "'+i+'"');else{let c=Object.keys(n);c=c.sort(),Ye(n)||c.splice(0,0,"prototype","__proto__","constructor"),t("object:"+c.length+":");let u=this;return c.forEach(function(l){u.dispatch(l),t(":"),u.dispatch(n[l]),t(",")})}},_array:function(n,s){s=typeof s<"u"?s:!1;let a=this;if(t("array:"+n.length+":"),!s||n.length<=1){n.forEach(function(c){a.dispatch(c)});return}let i=[],o=n.map(function(c){let u=er(),l=e.slice();return ct(u,l).dispatch(c),i=i.concat(l.slice(e.length)),u.read().toString()});e=e.concat(i),o.sort(),this._array(o,!1)},_date:function(n){t("date:"+n.toJSON())},_symbol:function(n){t("symbol:"+n.toString())},_error:function(n){t("error:"+n.toString())},_boolean:function(n){t("bool:"+n.toString())},_string:function(n){t("string:"+n.length+":"),t(n.toString())},_function:function(n){t("fn:"),Ye(n)?this.dispatch("[native]"):this.dispatch(n.toString()),this.dispatch("function-name:"+String(n.name)),this._object(n)},_number:function(n){t("number:"+n.toString())},_xml:function(n){t("xml:"+n.toString())},_null:function(){t("Null")},_undefined:function(){t("Undefined")},_regexp:function(n){t("regex:"+n.toString())},_uint8array:function(n){t("uint8array:"),this.dispatch(Array.prototype.slice.call(n))},_uint8clampedarray:function(n){t("uint8clampedarray:"),this.dispatch(Array.prototype.slice.call(n))},_int8array:function(n){t("int8array:"),this.dispatch(Array.prototype.slice.call(n))},_uint16array:function(n){t("uint16array:"),this.dispatch(Array.prototype.slice.call(n))},_int16array:function(n){t("int16array:"),this.dispatch(Array.prototype.slice.call(n))},_uint32array:function(n){t("uint32array:"),this.dispatch(Array.prototype.slice.call(n))},_int32array:function(n){t("int32array:"),this.dispatch(Array.prototype.slice.call(n))},_float32array:function(n){t("float32array:"),this.dispatch(Array.prototype.slice.call(n))},_float64array:function(n){t("float64array:"),this.dispatch(Array.prototype.slice.call(n))},_arraybuffer:function(n){t("arraybuffer:"),this.dispatch(new Uint8Array(n))},_url:function(n){t("url:"+n.toString())},_map:function(n){t("map:");let s=Array.from(n);this._array(s,!0)},_set:function(n){t("set:");let s=Array.from(n);this._array(s,!0)},_file:function(n){t("file:"),this.dispatch([n.name,n.size,n.type,n.lastModified])},_blob:function(){throw Error(`Hashing Blob objects is currently not supported
(see https://github.com/puleos/object-hash/issues/26)
Use "options.replacer" or "options.ignoreUnknown"
`)},_domwindow:function(){t("domwindow")},_bigint:function(n){t("bigint:"+n.toString())},_process:function(){t("process")},_timer:function(){t("timer")},_pipe:function(){t("pipe")},_tcp:function(){t("tcp")},_udp:function(){t("udp")},_tty:function(){t("tty")},_statwatcher:function(){t("statwatcher")},_securecontext:function(){t("securecontext")},_connection:function(){t("connection")},_zlib:function(){t("zlib")},_context:function(){t("context")},_nodescript:function(){t("nodescript")},_httpparser:function(){t("httpparser")},_dataview:function(){t("dataview")},_signal:function(){t("signal")},_fsevent:function(){t("fsevent")},_tlswrap:function(){t("tlswrap")}}}function er(){return{buf:"",write:function(r){this.buf+=r},end:function(r){this.buf+=r},read:function(){return this.buf}}}function tr(r,e){let t=this[r];return t instanceof Date?`__raycast_cached_date__${t.toString()}`:Buffer.isBuffer(t)?`__raycast_cached_buffer__${t.toString("base64")}`:e}function rr(r,e){return typeof e=="string"&&e.startsWith("__raycast_cached_date__")?new Date(e.replace("__raycast_cached_date__","")):typeof e=="string"&&e.startsWith("__raycast_cached_buffer__")?Buffer.from(e.replace("__raycast_cached_buffer__",""),"base64"):e}function Xe(r){let e=rt.default.createHash("sha1");return ct(e).dispatch(r),e.digest("hex")}var nr=Symbol("cache without namespace"),Qe=new Map;function sr(r,e,t){let n=t?.cacheNamespace||nr,s=Qe.get(n)||Qe.set(n,new w.Cache({namespace:t?.cacheNamespace})).get(n);if(!s)throw new Error("Missing cache");let a=M(r),i=M(e),o=(0,k.useSyncExternalStore)(s.subscribe,()=>{try{return s.get(a.current)}catch(f){console.error("Could not get Cache data:",f);return}}),c=(0,k.useMemo)(()=>{if(typeof o<"u"){if(o==="undefined")return;try{return JSON.parse(o,rr)}catch(f){return console.warn("The cached data is corrupted",f),i.current}}else return i.current},[o,i]),u=M(c),l=(0,k.useCallback)(f=>{let d=typeof f=="function"?f(u.current):f;if(typeof d>"u")s.set(a.current,"undefined");else{let b=JSON.stringify(d,tr);s.set(a.current,b)}return d},[s,a,u]);return[c,l]}var q=Symbol();function te(r,e,t){let{initialData:n,keepPreviousData:s,internal_cacheKeySuffix:a,...i}=t||{},o=(0,k.useRef)(null),[c,u]=sr(Xe(e||[])+a,q,{cacheNamespace:Xe(r)}),l=(0,k.useRef)(c!==q?c:n),f=(0,k.useRef)(void 0),{mutate:d,revalidate:b,...y}=Te(r,e||[],{...i,onData(E,A){f.current=A,i.onData&&i.onData(E,A),!(A&&A.page>0)&&(o.current="promise",l.current=E,u(E))}}),m,S=y.pagination;f.current&&f.current.page>0&&y.data?m=y.data:o.current==="promise"?m=l.current:s&&c!==q?(m=c,S&&(S.hasMore=!0,S.pageSize=c.length)):s&&c===q?m=l.current:c!==q?(m=c,S&&(S.hasMore=!0,S.pageSize=c.length)):m=n;let g=M(m),x=(0,k.useCallback)(async(E,A)=>{let U;try{if(A?.optimisticUpdate){typeof A?.rollbackOnError!="function"&&A?.rollbackOnError!==!1&&(U=structuredClone(g.current));let F=A.optimisticUpdate(g.current);o.current="cache",l.current=F,u(F)}return await d(E,{shouldRevalidateAfter:A?.shouldRevalidateAfter})}catch(F){if(typeof A?.rollbackOnError=="function"){let P=A.rollbackOnError(g.current);o.current="cache",l.current=P,u(P)}else A?.optimisticUpdate&&A?.rollbackOnError!==!1&&(o.current="cache",l.current=U,u(U));throw F}},[u,d,g,l,o]);return(0,k.useEffect)(()=>{c!==q&&(o.current="cache",l.current=c)},[c]),{data:m,isLoading:y.isLoading,error:y.error,mutate:f.current&&f.current.page>0?d:x,pagination:S,revalidate:b}}var le=r=>!!r&&typeof r=="object"&&typeof r.removeListener=="function"&&typeof r.emit=="function"&&typeof r.reallyExit=="function"&&typeof r.listeners=="function"&&typeof r.kill=="function"&&typeof r.pid=="number"&&typeof r.on=="function",Ae=Symbol.for("signal-exit emitter"),Ee=class{constructor(){if(this.emitted={afterExit:!1,exit:!1},this.listeners={afterExit:[],exit:[]},this.count=0,this.id=Math.random(),ke[Ae])return ke[Ae];Object.defineProperty(ke,Ae,{value:this,writable:!1,enumerable:!1,configurable:!1})}on(e,t){this.listeners[e].push(t)}removeListener(e,t){let n=this.listeners[e],s=n.indexOf(t);s!==-1&&(s===0&&n.length===1?n.length=0:n.splice(s,1))}emit(e,t,n){if(this.emitted[e])return!1;this.emitted[e]=!0;let s=!1;for(let a of this.listeners[e])s=a(t,n)===!0||s;return e==="exit"&&(s=this.emit("afterExit",t,n)||s),s}},Se=class{onExit(){return()=>{}}load(){}unload(){}},ve=class{#o;#t;#e;#a;#i;#s;#n;#r;constructor(e){this.#o=process.platform==="win32"?"SIGINT":"SIGHUP",this.#t=new Ee,this.#s={},this.#n=!1,this.#r=[],this.#r.push("SIGHUP","SIGINT","SIGTERM"),globalThis.process.platform!=="win32"&&this.#r.push("SIGALRM","SIGABRT","SIGVTALRM","SIGXCPU","SIGXFSZ","SIGUSR2","SIGTRAP","SIGSYS","SIGQUIT","SIGIOT"),globalThis.process.platform==="linux"&&this.#r.push("SIGIO","SIGPOLL","SIGPWR","SIGSTKFLT"),this.#e=e,this.#s={};for(let t of this.#r)this.#s[t]=()=>{let n=this.#e.listeners(t),{count:s}=this.#t,a=e;if(typeof a.__signal_exit_emitter__=="object"&&typeof a.__signal_exit_emitter__.count=="number"&&(s+=a.__signal_exit_emitter__.count),n.length===s){this.unload();let i=this.#t.emit("exit",null,t),o=t==="SIGHUP"?this.#o:t;i||e.kill(e.pid,o)}};this.#i=e.reallyExit,this.#a=e.emit}onExit(e,t){if(!le(this.#e))return()=>{};this.#n===!1&&this.load();let n=t?.alwaysLast?"afterExit":"exit";return this.#t.on(n,e),()=>{this.#t.removeListener(n,e),this.#t.listeners.exit.length===0&&this.#t.listeners.afterExit.length===0&&this.unload()}}load(){if(!this.#n){this.#n=!0,this.#t.count+=1;for(let e of this.#r)try{let t=this.#s[e];t&&this.#e.on(e,t)}catch{}this.#e.emit=(e,...t)=>this.#u(e,...t),this.#e.reallyExit=e=>this.#c(e)}}unload(){this.#n&&(this.#n=!1,this.#r.forEach(e=>{let t=this.#s[e];if(!t)throw new Error("Listener not defined for signal: "+e);try{this.#e.removeListener(e,t)}catch{}}),this.#e.emit=this.#a,this.#e.reallyExit=this.#i,this.#t.count-=1)}#c(e){return le(this.#e)?(this.#e.exitCode=e||0,this.#t.emit("exit",this.#e.exitCode,null),this.#i.call(this.#e,this.#e.exitCode)):0}#u(e,...t){let n=this.#a;if(e==="exit"&&le(this.#e)){typeof t[0]=="number"&&(this.#e.exitCode=t[0]);let s=n.call(this.#e,e,...t);return this.#t.emit("exit",this.#e.exitCode,null),s}else return n.call(this.#e,e,...t)}},xe=null,ar=(r,e)=>(xe||(xe=le(process)?new ve(process):new Se),xe.onExit(r,e));function ir(r,{timeout:e}={}){let t=new Promise((o,c)=>{r.on("exit",(u,l)=>{o({exitCode:u,signal:l,timedOut:!1})}),r.on("error",u=>{c(u)}),r.stdin&&r.stdin.on("error",u=>{c(u)})}),n=ar(()=>{r.kill()});if(e===0||e===void 0)return t.finally(()=>n());let s,a=new Promise((o,c)=>{s=setTimeout(()=>{r.kill("SIGTERM"),c(Object.assign(new Error("Timed out"),{timedOut:!0,signal:"SIGTERM"}))},e)}),i=t.finally(()=>{clearTimeout(s)});return Promise.race([a,i]).finally(()=>n())}var Ce=class extends Error{constructor(){super("The output is too big"),this.name="MaxBufferError"}};function or(r){let{encoding:e}=r,t=e==="buffer",n=new ee.default.PassThrough({objectMode:!1});e&&e!=="buffer"&&n.setEncoding(e);let s=0,a=[];return n.on("data",i=>{a.push(i),s+=i.length}),n.getBufferedValue=()=>t?Buffer.concat(a,s):a.join(""),n.getBufferedLength=()=>s,n}async function qe(r,e){let t=or(e);return await new Promise((n,s)=>{let a=i=>{i&&t.getBufferedLength()<=st.constants.MAX_LENGTH&&(i.bufferedData=t.getBufferedValue()),s(i)};(async()=>{try{await(0,at.promisify)(ee.default.pipeline)(r,t),n()}catch(i){a(i)}})(),t.on("data",()=>{t.getBufferedLength()>8e7&&a(new Ce)})}),t.getBufferedValue()}async function et(r,e){r.destroy();try{return await e}catch(t){return t.bufferedData}}async function cr({stdout:r,stderr:e},{encoding:t},n){let s=qe(r,{encoding:t}),a=qe(e,{encoding:t});try{return await Promise.all([n,s,a])}catch(i){return Promise.all([{error:i,exitCode:null,signal:i.signal,timedOut:i.timedOut||!1},et(r,s),et(e,a)])}}function ur(r){let e=typeof r=="string"?`
`:10,t=typeof r=="string"?"\r":13;return r[r.length-1]===e&&(r=r.slice(0,-1)),r[r.length-1]===t&&(r=r.slice(0,-1)),r}function tt(r,e){return r.stripFinalNewline?ur(e):e}function lr({timedOut:r,timeout:e,signal:t,exitCode:n}){return r?`timed out after ${e} milliseconds`:t!=null?`was killed with ${t}`:n!=null?`failed with exit code ${n}`:"failed"}function fr({stdout:r,stderr:e,error:t,signal:n,exitCode:s,command:a,timedOut:i,options:o,parentError:c}){let l=`Command ${lr({timedOut:i,timeout:o?.timeout,signal:n,exitCode:s})}: ${a}`,f=t?`${l}
${t.message}`:l,d=[f,e,r].filter(Boolean).join(`
`);return t?t.originalMessage=t.message:t=c,t.message=d,t.shortMessage=f,t.command=a,t.exitCode=s,t.signal=n,t.stdout=r,t.stderr=e,"bufferedData"in t&&delete t.bufferedData,t}function dr({stdout:r,stderr:e,error:t,exitCode:n,signal:s,timedOut:a,command:i,options:o,parentError:c}){if(t||n!==0||s!==null)throw fr({error:t,exitCode:n,signal:s,stdout:r,stderr:e,command:i,timedOut:a,options:o,parentError:c});return r}function ut(r,e){try{let t=i=>i.startsWith("http")?i:`https://${i}`,s=(typeof r=="string"?new ot.URL(t(r)):r).hostname;switch(process.env.FAVICON_PROVIDER??"raycast"){case"none":return{source:e?.fallback??w.Icon.Link,mask:e?.mask};case"apple":return{source:e?.fallback??w.Icon.Link,mask:e?.mask};case"duckduckgo":case"duckDuckGo":return{source:`https://icons.duckduckgo.com/ip3/${s}.ico`,fallback:e?.fallback??w.Icon.Link,mask:e?.mask};case"google":return{source:`https://www.google.com/s2/favicons?sz=${e?.size??64}&domain=${s}`,fallback:e?.fallback??w.Icon.Link,mask:e?.mask};case"legacy":case"raycast":default:return{source:`https://api.ray.so/favicon?url=${s}&size=${e?.size}`,fallback:e?.fallback??w.Icon.Link,mask:e?.mask}}}catch(t){return console.error(t),w.Icon.Link}}async function re(r,e,t){if(process.platform!=="darwin")throw new Error("AppleScript is only supported on macOS");let{humanReadableOutput:n,language:s,timeout:a,...i}=Array.isArray(e)?t||{}:e||{},o=n!==!1?[]:["-ss"];s==="JavaScript"&&o.push("-l","JavaScript"),Array.isArray(e)&&o.push("-",...e);let c=nt.default.spawn("osascript",o,{...i,env:{PATH:"/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin"}}),u=ir(c,{timeout:a??1e4});c.stdin.end(r);let[{error:l,exitCode:f,signal:d,timedOut:b},y,m]=await cr(c,{encoding:"utf8"},u),S=tt({stripFinalNewline:!0},y),g=tt({stripFinalNewline:!0},m);return dr({stdout:S,stderr:g,error:l,exitCode:f,signal:d,timedOut:b,command:"osascript",options:t,parentError:new Error})}var L=require("@raycast/api");var de=new URL("https://www.raycast.com/"),_e="company.thebrowser.Browser",lt=["Firefox","iTerm2","Velja","Downie 4","Zen Browser","TeX","TLUNotifier"];var ft=require("@raycast/api"),{showDomain:dt,recentOnTop:ht,rememberFilterTag:pt,searchEngine:mt}=(0,ft.getPreferenceValues)();var se=r=>!(r!=null&&String(r).length>0),gt=r=>!se(r);var ne=[{title:"google",value:"https://google.com/search?q="},{title:"bing",value:"https://www.bing.com/search?q="},{title:"baidu",value:"https://www.baidu.com/s?wd="},{title:"brave",value:"https://search.brave.com/search?q="},{title:"duckduckgo",value:"https://duckduckgo.com/?q="}],bt=r=>{switch(mt){case"Google":return`${ne[0].value}${encodeURIComponent(r)}`;case"Bing":return`${ne[1].value}${encodeURIComponent(r)}`;case"Baidu":return`${ne[2].value}${encodeURIComponent(r)}`;case"Brave":return`${ne[3].value}${encodeURIComponent(r)}`;case"DuckDuckGo":return`${ne[4].value}${encodeURIComponent(r)}`;default:return`${ne[0].value}${encodeURIComponent(r)}`}};var Re=async()=>{try{let e=(await(0,L.getApplications)(de)).filter(n=>!lt.some(s=>n.name.includes(s))&&n.bundleId),t=await L.LocalStorage.getItem("Browser-Setup");if(t){let n=JSON.parse(t);return e.map(s=>{let a=n.find(i=>i.browser.path===s.path);return{browser:s,isChecked:a?a.isChecked:!0}})}else return e.map(n=>({browser:n,isChecked:!0}))}catch(r){(0,L.captureException)(r),console.error("Error fetching browsers")}return[]},pr=(r,e)=>`
tell application "${r}"
    activate
    set _wnd to first window where id is ${e.windowId}
    set index of _wnd to 1
    set current tab of _wnd to tab ${e.tabId} of _wnd
end tell
`,mr=(r,e)=>`
tell application "${r}"
  activate
  set _wnd to first window where id is ${e.windowId}
  set index of _wnd to 1
  set active tab index of _wnd to ${e.tabId}
end tell
`,gr=async(r,e)=>{try{return await re(pr(r,e))}catch(t){return console.error(`Error jumpToWebkitTab for ${r}`),String(t)}},br=async(r,e)=>{try{return await re(mr(r,e))}catch(t){return console.error(`Error jumpToChromeTab for ${r}`),String(t)}},yt=async(r,e)=>{if(r.bundleId===_e)return await $t(r,e,"select",!0);{let t=await gr(r.name,e);if(se(t))return t;{let n=await br(r.name,e);return se(n)?n:await(0,L.open)(e.url,r)}}};function yr(r,e,t,n=!1){return`
tell application "${r.name}"
    if (count of windows) is 0 then
        make new window
    end if
    set foundTab to false
    repeat with aTab in every tab of first window
        set currentURL to URL of aTab
        if currentURL is equal to "${e.url}" then
            set foundTab to true
            tell aTab to ${t}
            exit repeat 
        end if
    end repeat
    if foundTab is false then
        error "Tab not found"
    end if
    if ${n} then
        activate
    end if
end tell
    `}var $t=async(r,e,t,n=!1)=>{try{return await re(yr(r,e,t,n))}catch(s){return console.error(`Error runAppleScriptOnArcTab for ${r.name}`),String(s)}},$r=(r,e)=>`
tell application "${r}"
    set _wnd to first window where id is ${e.windowId}
    tell _wnd
        set tabList to tabs
        if ${e.tabId} \u2264 (count tabList) then
            close (item ${e.tabId} of tabList)
        else
            error "Tab index out of range."
        end if
    end tell
end tell
`,wt=async(r,e)=>{try{return r.bundleId===_e?await $t(r,e,"close",!1):await re($r(r.name,e))}catch(t){return console.error(`Error closeBrowserTab for ${r.name}`),String(t)}},wr=r=>`
tell application "${r}"
	if running then
		set output to ""
		repeat with aWindow in every window
      set chromiumTabIndex to 0 
			repeat with aTab in every tab of aWindow
        set chromiumTabIndex to chromiumTabIndex + 1
				try
					-- WebKit
					set tabName to name of aTab
				on error
					-- Chromium
					set tabName to title of aTab
				end try
				set tabUrl to URL of aTab
        set windowId to id of aWindow
				try
          -- WebKit
          set tabIndex to index of aTab
        on error
          -- Chromium
          set tabIndex to chromiumTabIndex
        end try
				set tabInfo to tabName & "
" & tabUrl & "
" & windowId & "
" & tabIndex & "

"
				set output to output & tabInfo
			end repeat
		end repeat
		return output
	else
		return ""
	end if
end tell
`,kr=async r=>{try{return await re(wr(r))}catch(e){(0,L.captureException)(e),console.error(`Error fetching tabs for ${r}`)}},Ar=(r,e)=>{try{let n=e.split(`

`).filter(s=>s.length>0).map(s=>{let[a,i,o,c]=s.split(`
`),u=new URL(i).hostname;return{browser:r.name,title:a,url:i,domain:u,windowId:o,tabId:c}});return ht?n.reverse():n}catch(t){(0,L.captureException)(t),console.error("Error parsing tabs")}return[]},kt=async()=>{try{let t=(await Re()).filter(s=>s.isChecked).map(s=>s.browser).map(async s=>{let a=await kr(s.name);return a?{browser:s,tabs:Ar(s,a)}:null});return(await Promise.all(t)).filter(s=>s!==null)}catch(r){return(0,L.captureException)(r),console.error("Error fetching browser tabs"),[]}};function At(){return te(()=>kt())}var H=require("react");var xt=require("@raycast/api");function Et(){return Te(()=>(0,xt.getFrontmostApplication)())}function G(r){return Array.isArray?Array.isArray(r):Pt(r)==="[object Array]"}var xr=1/0;function Er(r){if(typeof r=="string")return r;let e=r+"";return e=="0"&&1/r==-xr?"-0":e}function Sr(r){return r==null?"":Er(r)}function j(r){return typeof r=="string"}function Rt(r){return typeof r=="number"}function vr(r){return r===!0||r===!1||Cr(r)&&Pt(r)=="[object Boolean]"}function It(r){return typeof r=="object"}function Cr(r){return It(r)&&r!==null}function D(r){return r!=null}function Ie(r){return!r.trim().length}function Pt(r){return r==null?r===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(r)}var Tr="Incorrect 'index' type",_r=r=>`Invalid value for key ${r}`,Rr=r=>`Pattern length exceeds max of ${r}.`,Ir=r=>`Missing ${r} property in key`,Pr=r=>`Property 'weight' in key '${r}' must be a positive integer`,St=Object.prototype.hasOwnProperty,Pe=class{constructor(e){this._keys=[],this._keyMap={};let t=0;e.forEach(n=>{let s=Dt(n);this._keys.push(s),this._keyMap[s.id]=s,t+=s.weight}),this._keys.forEach(n=>{n.weight/=t})}get(e){return this._keyMap[e]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}};function Dt(r){let e=null,t=null,n=null,s=1,a=null;if(j(r)||G(r))n=r,e=vt(r),t=De(r);else{if(!St.call(r,"name"))throw new Error(Ir("name"));let i=r.name;if(n=i,St.call(r,"weight")&&(s=r.weight,s<=0))throw new Error(Pr(i));e=vt(i),t=De(i),a=r.getFn}return{path:e,id:t,weight:s,src:n,getFn:a}}function vt(r){return G(r)?r:r.split(".")}function De(r){return G(r)?r.join("."):r}function Dr(r,e){let t=[],n=!1,s=(a,i,o)=>{if(D(a))if(!i[o])t.push(a);else{let c=i[o],u=a[c];if(!D(u))return;if(o===i.length-1&&(j(u)||Rt(u)||vr(u)))t.push(Sr(u));else if(G(u)){n=!0;for(let l=0,f=u.length;l<f;l+=1)s(u[l],i,o+1)}else i.length&&s(u,i,o+1)}};return s(r,j(e)?e.split("."):e,0),n?t:t[0]}var Ur={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},Br={isCaseSensitive:!1,ignoreDiacritics:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(r,e)=>r.score===e.score?r.idx<e.idx?-1:1:r.score<e.score?-1:1},Mr={location:0,threshold:.6,distance:100},Lr={useExtendedSearch:!1,getFn:Dr,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1},h={...Br,...Ur,...Mr,...Lr},Or=/[^ ]+/g;function Fr(r=1,e=3){let t=new Map,n=Math.pow(10,e);return{get(s){let a=s.match(Or).length;if(t.has(a))return t.get(a);let i=1/Math.pow(a,.5*r),o=parseFloat(Math.round(i*n)/n);return t.set(a,o),o},clear(){t.clear()}}}var ie=class{constructor({getFn:e=h.getFn,fieldNormWeight:t=h.fieldNormWeight}={}){this.norm=Fr(t,3),this.getFn=e,this.isCreated=!1,this.setIndexRecords()}setSources(e=[]){this.docs=e}setIndexRecords(e=[]){this.records=e}setKeys(e=[]){this.keys=e,this._keysMap={},e.forEach((t,n)=>{this._keysMap[t.id]=n})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,j(this.docs[0])?this.docs.forEach((e,t)=>{this._addString(e,t)}):this.docs.forEach((e,t)=>{this._addObject(e,t)}),this.norm.clear())}add(e){let t=this.size();j(e)?this._addString(e,t):this._addObject(e,t)}removeAt(e){this.records.splice(e,1);for(let t=e,n=this.size();t<n;t+=1)this.records[t].i-=1}getValueForItemAtKeyId(e,t){return e[this._keysMap[t]]}size(){return this.records.length}_addString(e,t){if(!D(e)||Ie(e))return;let n={v:e,i:t,n:this.norm.get(e)};this.records.push(n)}_addObject(e,t){let n={i:t,$:{}};this.keys.forEach((s,a)=>{let i=s.getFn?s.getFn(e):this.getFn(e,s.path);if(D(i)){if(G(i)){let o=[],c=[{nestedArrIndex:-1,value:i}];for(;c.length;){let{nestedArrIndex:u,value:l}=c.pop();if(D(l))if(j(l)&&!Ie(l)){let f={v:l,i:u,n:this.norm.get(l)};o.push(f)}else G(l)&&l.forEach((f,d)=>{c.push({nestedArrIndex:d,value:f})})}n.$[a]=o}else if(j(i)&&!Ie(i)){let o={v:i,n:this.norm.get(i)};n.$[a]=o}}}),this.records.push(n)}toJSON(){return{keys:this.keys,records:this.records}}};function Ut(r,e,{getFn:t=h.getFn,fieldNormWeight:n=h.fieldNormWeight}={}){let s=new ie({getFn:t,fieldNormWeight:n});return s.setKeys(r.map(Dt)),s.setSources(e),s.create(),s}function Nr(r,{getFn:e=h.getFn,fieldNormWeight:t=h.fieldNormWeight}={}){let{keys:n,records:s}=r,a=new ie({getFn:e,fieldNormWeight:t});return a.setKeys(n),a.setIndexRecords(s),a}function he(r,{errors:e=0,currentLocation:t=0,expectedLocation:n=0,distance:s=h.distance,ignoreLocation:a=h.ignoreLocation}={}){let i=e/r.length;if(a)return i;let o=Math.abs(n-t);return s?i+o/s:o?1:i}function Wr(r=[],e=h.minMatchCharLength){let t=[],n=-1,s=-1,a=0;for(let i=r.length;a<i;a+=1){let o=r[a];o&&n===-1?n=a:!o&&n!==-1&&(s=a-1,s-n+1>=e&&t.push([n,s]),n=-1)}return r[a-1]&&a-n>=e&&t.push([n,a-1]),t}var X=32;function Vr(r,e,t,{location:n=h.location,distance:s=h.distance,threshold:a=h.threshold,findAllMatches:i=h.findAllMatches,minMatchCharLength:o=h.minMatchCharLength,includeMatches:c=h.includeMatches,ignoreLocation:u=h.ignoreLocation}={}){if(e.length>X)throw new Error(Rr(X));let l=e.length,f=r.length,d=Math.max(0,Math.min(n,f)),b=a,y=d,m=o>1||c,S=m?Array(f):[],g;for(;(g=r.indexOf(e,y))>-1;){let P=he(e,{currentLocation:g,expectedLocation:d,distance:s,ignoreLocation:u});if(b=Math.min(P,b),y=g+l,m){let N=0;for(;N<l;)S[g+N]=1,N+=1}}y=-1;let x=[],E=1,A=l+f,U=1<<l-1;for(let P=0;P<l;P+=1){let N=0,W=A;for(;N<W;)he(e,{errors:P,currentLocation:d+W,expectedLocation:d,distance:s,ignoreLocation:u})<=b?N=W:A=W,W=Math.floor((A-N)/2+N);A=W;let oe=Math.max(1,d-W+1),B=i?f:Math.min(d+W,f)+l,_=Array(B+2);_[B+1]=(1<<P)-1;for(let R=B;R>=oe;R-=1){let $=R-1,V=t[r.charAt($)];if(m&&(S[$]=+!!V),_[R]=(_[R+1]<<1|1)&V,P&&(_[R]|=(x[R+1]|x[R])<<1|1|x[R+1]),_[R]&U&&(E=he(e,{errors:P,currentLocation:$,expectedLocation:d,distance:s,ignoreLocation:u}),E<=b)){if(b=E,y=$,y<=d)break;oe=Math.max(1,2*d-y)}}if(he(e,{errors:P+1,currentLocation:d,expectedLocation:d,distance:s,ignoreLocation:u})>b)break;x=_}let F={isMatch:y>=0,score:Math.max(.001,E)};if(m){let P=Wr(S,o);P.length?c&&(F.indices=P):F.isMatch=!1}return F}function jr(r){let e={};for(let t=0,n=r.length;t<n;t+=1){let s=r.charAt(t);e[s]=(e[s]||0)|1<<n-t-1}return e}var pe=String.prototype.normalize?r=>r.normalize("NFD").replace(/[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D3-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D82\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ABE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF2-\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DF9\u1DFB-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]/g,""):r=>r,me=class{constructor(e,{location:t=h.location,threshold:n=h.threshold,distance:s=h.distance,includeMatches:a=h.includeMatches,findAllMatches:i=h.findAllMatches,minMatchCharLength:o=h.minMatchCharLength,isCaseSensitive:c=h.isCaseSensitive,ignoreDiacritics:u=h.ignoreDiacritics,ignoreLocation:l=h.ignoreLocation}={}){if(this.options={location:t,threshold:n,distance:s,includeMatches:a,findAllMatches:i,minMatchCharLength:o,isCaseSensitive:c,ignoreDiacritics:u,ignoreLocation:l},e=c?e:e.toLowerCase(),e=u?pe(e):e,this.pattern=e,this.chunks=[],!this.pattern.length)return;let f=(b,y)=>{this.chunks.push({pattern:b,alphabet:jr(b),startIndex:y})},d=this.pattern.length;if(d>X){let b=0,y=d%X,m=d-y;for(;b<m;)f(this.pattern.substr(b,X),b),b+=X;if(y){let S=d-X;f(this.pattern.substr(S),S)}}else f(this.pattern,0)}searchIn(e){let{isCaseSensitive:t,ignoreDiacritics:n,includeMatches:s}=this.options;if(e=t?e:e.toLowerCase(),e=n?pe(e):e,this.pattern===e){let m={isMatch:!0,score:0};return s&&(m.indices=[[0,e.length-1]]),m}let{location:a,distance:i,threshold:o,findAllMatches:c,minMatchCharLength:u,ignoreLocation:l}=this.options,f=[],d=0,b=!1;this.chunks.forEach(({pattern:m,alphabet:S,startIndex:g})=>{let{isMatch:x,score:E,indices:A}=Vr(e,m,S,{location:a+g,distance:i,threshold:o,findAllMatches:c,minMatchCharLength:u,includeMatches:s,ignoreLocation:l});x&&(b=!0),d+=E,x&&A&&(f=[...f,...A])});let y={isMatch:b,score:b?d/this.chunks.length:1};return b&&s&&(y.indices=f),y}},z=class{constructor(e){this.pattern=e}static isMultiMatch(e){return Ct(e,this.multiRegex)}static isSingleMatch(e){return Ct(e,this.singleRegex)}search(){}};function Ct(r,e){let t=r.match(e);return t?t[1]:null}var Ue=class extends z{constructor(e){super(e)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(e){let t=e===this.pattern;return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}},Be=class extends z{constructor(e){super(e)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(e){let n=e.indexOf(this.pattern)===-1;return{isMatch:n,score:n?0:1,indices:[0,e.length-1]}}},Me=class extends z{constructor(e){super(e)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(e){let t=e.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}},Le=class extends z{constructor(e){super(e)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(e){let t=!e.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}},Oe=class extends z{constructor(e){super(e)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(e){let t=e.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[e.length-this.pattern.length,e.length-1]}}},Fe=class extends z{constructor(e){super(e)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(e){let t=!e.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}},ge=class extends z{constructor(e,{location:t=h.location,threshold:n=h.threshold,distance:s=h.distance,includeMatches:a=h.includeMatches,findAllMatches:i=h.findAllMatches,minMatchCharLength:o=h.minMatchCharLength,isCaseSensitive:c=h.isCaseSensitive,ignoreDiacritics:u=h.ignoreDiacritics,ignoreLocation:l=h.ignoreLocation}={}){super(e),this._bitapSearch=new me(e,{location:t,threshold:n,distance:s,includeMatches:a,findAllMatches:i,minMatchCharLength:o,isCaseSensitive:c,ignoreDiacritics:u,ignoreLocation:l})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(e){return this._bitapSearch.searchIn(e)}},be=class extends z{constructor(e){super(e)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(e){let t=0,n,s=[],a=this.pattern.length;for(;(n=e.indexOf(this.pattern,t))>-1;)t=n+a,s.push([n,t-1]);let i=!!s.length;return{isMatch:i,score:i?0:1,indices:s}}},Ne=[Ue,be,Me,Le,Fe,Oe,Be,ge],Tt=Ne.length,zr=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,Gr="|";function Kr(r,e={}){return r.split(Gr).map(t=>{let n=t.trim().split(zr).filter(a=>a&&!!a.trim()),s=[];for(let a=0,i=n.length;a<i;a+=1){let o=n[a],c=!1,u=-1;for(;!c&&++u<Tt;){let l=Ne[u],f=l.isMultiMatch(o);f&&(s.push(new l(f,e)),c=!0)}if(!c)for(u=-1;++u<Tt;){let l=Ne[u],f=l.isSingleMatch(o);if(f){s.push(new l(f,e));break}}}return s})}var Hr=new Set([ge.type,be.type]),We=class{constructor(e,{isCaseSensitive:t=h.isCaseSensitive,ignoreDiacritics:n=h.ignoreDiacritics,includeMatches:s=h.includeMatches,minMatchCharLength:a=h.minMatchCharLength,ignoreLocation:i=h.ignoreLocation,findAllMatches:o=h.findAllMatches,location:c=h.location,threshold:u=h.threshold,distance:l=h.distance}={}){this.query=null,this.options={isCaseSensitive:t,ignoreDiacritics:n,includeMatches:s,minMatchCharLength:a,findAllMatches:o,ignoreLocation:i,location:c,threshold:u,distance:l},e=t?e:e.toLowerCase(),e=n?pe(e):e,this.pattern=e,this.query=Kr(this.pattern,this.options)}static condition(e,t){return t.useExtendedSearch}searchIn(e){let t=this.query;if(!t)return{isMatch:!1,score:1};let{includeMatches:n,isCaseSensitive:s,ignoreDiacritics:a}=this.options;e=s?e:e.toLowerCase(),e=a?pe(e):e;let i=0,o=[],c=0;for(let u=0,l=t.length;u<l;u+=1){let f=t[u];o.length=0,i=0;for(let d=0,b=f.length;d<b;d+=1){let y=f[d],{isMatch:m,indices:S,score:g}=y.search(e);if(m){if(i+=1,c+=g,n){let x=y.constructor.type;Hr.has(x)?o=[...o,...S]:o.push(S)}}else{c=0,i=0,o.length=0;break}}if(i){let d={isMatch:!0,score:c/i};return n&&(d.indices=o),d}}return{isMatch:!1,score:1}}},Ve=[];function Jr(...r){Ve.push(...r)}function je(r,e){for(let t=0,n=Ve.length;t<n;t+=1){let s=Ve[t];if(s.condition(r,e))return new s(r,e)}return new me(r,e)}var ye={AND:"$and",OR:"$or"},ze={PATH:"$path",PATTERN:"$val"},Ge=r=>!!(r[ye.AND]||r[ye.OR]),Zr=r=>!!r[ze.PATH],Yr=r=>!G(r)&&It(r)&&!Ge(r),_t=r=>({[ye.AND]:Object.keys(r).map(e=>({[e]:r[e]}))});function Bt(r,e,{auto:t=!0}={}){let n=s=>{let a=Object.keys(s),i=Zr(s);if(!i&&a.length>1&&!Ge(s))return n(_t(s));if(Yr(s)){let c=i?s[ze.PATH]:a[0],u=i?s[ze.PATTERN]:s[c];if(!j(u))throw new Error(_r(c));let l={keyId:De(c),pattern:u};return t&&(l.searcher=je(u,e)),l}let o={children:[],operator:a[0]};return a.forEach(c=>{let u=s[c];G(u)&&u.forEach(l=>{o.children.push(n(l))})}),o};return Ge(r)||(r=_t(r)),n(r)}function Xr(r,{ignoreFieldNorm:e=h.ignoreFieldNorm}){r.forEach(t=>{let n=1;t.matches.forEach(({key:s,norm:a,score:i})=>{let o=s?s.weight:null;n*=Math.pow(i===0&&o?Number.EPSILON:i,(o||1)*(e?1:a))}),t.score=n})}function Qr(r,e){let t=r.matches;e.matches=[],D(t)&&t.forEach(n=>{if(!D(n.indices)||!n.indices.length)return;let{indices:s,value:a}=n,i={indices:s,value:a};n.key&&(i.key=n.key.src),n.idx>-1&&(i.refIndex=n.idx),e.matches.push(i)})}function qr(r,e){e.score=r.score}function en(r,e,{includeMatches:t=h.includeMatches,includeScore:n=h.includeScore}={}){let s=[];return t&&s.push(Qr),n&&s.push(qr),r.map(a=>{let{idx:i}=a,o={item:e[i],refIndex:i};return s.length&&s.forEach(c=>{c(a,o)}),o})}var K=class{constructor(e,t={},n){this.options={...h,...t},this.options.useExtendedSearch,this._keyStore=new Pe(this.options.keys),this.setCollection(e,n)}setCollection(e,t){if(this._docs=e,t&&!(t instanceof ie))throw new Error(Tr);this._myIndex=t||Ut(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(e){D(e)&&(this._docs.push(e),this._myIndex.add(e))}remove(e=()=>!1){let t=[];for(let n=0,s=this._docs.length;n<s;n+=1){let a=this._docs[n];e(a,n)&&(this.removeAt(n),n-=1,s-=1,t.push(a))}return t}removeAt(e){this._docs.splice(e,1),this._myIndex.removeAt(e)}getIndex(){return this._myIndex}search(e,{limit:t=-1}={}){let{includeMatches:n,includeScore:s,shouldSort:a,sortFn:i,ignoreFieldNorm:o}=this.options,c=j(e)?j(this._docs[0])?this._searchStringList(e):this._searchObjectList(e):this._searchLogical(e);return Xr(c,{ignoreFieldNorm:o}),a&&c.sort(i),Rt(t)&&t>-1&&(c=c.slice(0,t)),en(c,this._docs,{includeMatches:n,includeScore:s})}_searchStringList(e){let t=je(e,this.options),{records:n}=this._myIndex,s=[];return n.forEach(({v:a,i,n:o})=>{if(!D(a))return;let{isMatch:c,score:u,indices:l}=t.searchIn(a);c&&s.push({item:a,idx:i,matches:[{score:u,value:a,norm:o,indices:l}]})}),s}_searchLogical(e){let t=Bt(e,this.options),n=(o,c,u)=>{if(!o.children){let{keyId:f,searcher:d}=o,b=this._findMatches({key:this._keyStore.get(f),value:this._myIndex.getValueForItemAtKeyId(c,f),searcher:d});return b&&b.length?[{idx:u,item:c,matches:b}]:[]}let l=[];for(let f=0,d=o.children.length;f<d;f+=1){let b=o.children[f],y=n(b,c,u);if(y.length)l.push(...y);else if(o.operator===ye.AND)return[]}return l},s=this._myIndex.records,a={},i=[];return s.forEach(({$:o,i:c})=>{if(D(o)){let u=n(t,o,c);u.length&&(a[c]||(a[c]={idx:c,item:o,matches:[]},i.push(a[c])),u.forEach(({matches:l})=>{a[c].matches.push(...l)}))}}),i}_searchObjectList(e){let t=je(e,this.options),{keys:n,records:s}=this._myIndex,a=[];return s.forEach(({$:i,i:o})=>{if(!D(i))return;let c=[];n.forEach((u,l)=>{c.push(...this._findMatches({key:u,value:i[l],searcher:t}))}),c.length&&a.push({idx:o,item:i,matches:c})}),a}_findMatches({key:e,value:t,searcher:n}){if(!D(t))return[];let s=[];if(G(t))t.forEach(({v:a,i,n:o})=>{if(!D(a))return;let{isMatch:c,score:u,indices:l}=n.searchIn(a);c&&s.push({score:u,key:e,value:a,idx:i,norm:o,indices:l})});else{let{v:a,n:i}=t,{isMatch:o,score:c,indices:u}=n.searchIn(a);o&&s.push({score:c,key:e,value:a,norm:i,indices:u})}return s}};K.version="7.1.0";K.createIndex=Ut;K.parseIndex=Nr;K.config=h;K.parseQuery=Bt;Jr(We);var J=require("@raycast/api"),Ke=require("react/jsx-runtime");function ae(){return(0,Ke.jsx)(J.ActionPanel.Section,{children:(0,Ke.jsx)(J.Action,{icon:J.Icon.Gear,title:"Configure Command",shortcut:{modifiers:["shift","cmd"],key:","},onAction:J.openCommandPreferences})})}var p=require("@raycast/api");var C=require("@raycast/api");function $e(){return te(()=>Re())}var Mt=require("react");var O=require("react/jsx-runtime");function we(r){let{browserTabsMutate:e}=r,{data:t,isLoading:n,mutate:s}=$e(),a=(0,Mt.useMemo)(()=>t||[],[t]);return(0,O.jsxs)(C.List,{isLoading:n,searchBarPlaceholder:"Search",children:[(0,O.jsx)(C.List.EmptyView,{icon:C.Icon.Compass,title:"No Browsers",actions:(0,O.jsx)(C.ActionPanel,{children:(0,O.jsx)(ae,{})})}),a.map((i,o)=>(0,O.jsx)(C.List.Item,{title:i.browser.name,icon:i.isChecked?{source:C.Icon.CheckCircle,tintColor:C.Color.Green}:C.Icon.Circle,actions:(0,O.jsxs)(C.ActionPanel,{children:[(0,O.jsx)(C.Action,{icon:C.Icon.Link,title:(i.isChecked?"Disable ":"Enable ")+i.browser.name,onAction:async()=>{let c=[...a];c[o].isChecked=!i.isChecked,await C.LocalStorage.setItem("Browser-Setup",JSON.stringify(c)),await s(),await e()}}),(0,O.jsx)(C.Action,{icon:C.Icon.ArrowLeftCircle,title:"Back",shortcut:{modifiers:["shift","cmd"],key:"s"},onAction:(0,C.useNavigation)().pop}),(0,O.jsx)(ae,{})]})},i.browser.path+o))]})}var T=require("react/jsx-runtime");function Lt(r){let{defaultBrowser:e,browser:t,tab:n,mutate:s,frontmostMutate:a,browserSetup:i}=r;return(0,T.jsxs)(T.Fragment,{children:[(0,T.jsxs)(p.ActionPanel.Section,{children:[(0,T.jsx)(p.Action,{icon:{fileIcon:t.path},title:`Open in ${t.name}`,onAction:async()=>{await(0,p.closeMainWindow)(),await yt(t,n),await a(),await s()}}),e&&e.name!=t.name&&(0,T.jsx)(p.Action,{icon:{fileIcon:e.path},title:`Open in ${e.name}`,onAction:async()=>{await(0,p.open)(n.url,e),await a(),await s()}}),i.filter(o=>o.browser.path!==t.path||o.browser.path!==e?.path).length>0&&(0,T.jsx)(p.ActionPanel.Submenu,{title:"Open in",icon:p.Icon.Compass,shortcut:{modifiers:["shift","cmd"],key:"enter"},children:i.filter(o=>o.browser.path!==t.path||o.browser.path!==e?.path).map((o,c)=>(0,T.jsx)(p.Action,{title:o.browser.name,icon:{fileIcon:o.browser.path},onAction:async()=>{await(0,p.open)(n.url,o.browser),await new Promise(u=>setTimeout(u,500)),await s()}},o.browser.path+c))})]}),(0,T.jsx)(p.ActionPanel.Section,{children:(0,T.jsx)(p.Action.CreateQuicklink,{icon:p.Icon.Link,shortcut:{modifiers:["cmd"],key:"s"},quicklink:{link:n.url,name:n.title,application:t}})}),(0,T.jsxs)(p.ActionPanel.Section,{children:[(0,T.jsx)(p.Action,{icon:p.Icon.Clipboard,title:"Copy URL",shortcut:{modifiers:["opt","cmd"],key:"c"},onAction:async()=>{await p.Clipboard.copy(n.url),await(0,p.showHUD)("\u{1F517} URL copied to clipboard")}}),(0,T.jsx)(p.Action,{icon:p.Icon.Text,title:"Copy Title",shortcut:{modifiers:["opt","cmd"],key:"t"},onAction:async()=>{await p.Clipboard.copy(n.title),await(0,p.showHUD)("\u{1F4DD} Title copied to clipboard")}}),gt(n.domain)&&(0,T.jsx)(p.Action,{icon:p.Icon.Globe,title:"Copy Domain",shortcut:{modifiers:["opt","cmd"],key:"d"},onAction:async()=>{await p.Clipboard.copy(n.domain),await(0,p.showHUD)("\u{1F310} Domain copied to clipboard")}})]}),(0,T.jsxs)(p.ActionPanel.Section,{children:[(0,T.jsx)(p.Action,{icon:p.Icon.Repeat,title:"Fetch Tabs",shortcut:{modifiers:["cmd"],key:"r"},onAction:async()=>{await a(),await s()}}),(0,T.jsx)(p.Action,{icon:{source:p.Icon.XMarkCircle,tintColor:p.Color.Red},title:"Close Tab",shortcut:{modifiers:["ctrl"],key:"x"},onAction:async()=>{let o=await(0,p.showToast)({title:"Closing",message:n.title,style:p.Toast.Style.Animated}),c=await wt(t,n);se(c)?(o.title="Tab Closed",o.style=p.Toast.Style.Success):(o.title="Failed to Close Tab",o.message=c,o.style=p.Toast.Style.Failure),await a(),await s()}})]}),(0,T.jsx)(p.ActionPanel.Section,{children:(0,T.jsx)(p.Action.Push,{title:"Select Browsers",icon:p.Icon.CheckCircle,shortcut:{modifiers:["shift","cmd"],key:"s"},target:(0,T.jsx)(we,{browserTabsMutate:s})})})]})}var Ot=require("@raycast/api");function Ft(){return te(()=>(0,Ot.getDefaultApplication)(de))}var I=require("react/jsx-runtime");function Nt(){let[r,e]=(0,H.useState)(""),[t,n]=(0,H.useState)(""),{data:s,mutate:a}=Et(),{data:i}=Ft(),[o,c]=(0,H.useState)(i),{data:u,isLoading:l,mutate:f}=At(),{data:d}=$e(),b=(0,H.useMemo)(()=>d||[],[d]),y=(0,H.useMemo)(()=>{c(t===""?i:u?.find(x=>x.browser.name===t)?.browser);let g=u?.filter(x=>t===""?!0:x.browser.name===t);if(s&&g&&g.length>1){let x=g.findIndex(E=>E.browser.name===s.name);if(x>0){let[E]=g.splice(x,1);g.unshift(E)}}return g??[]},[u,t,s]),m=(0,H.useMemo)(()=>{let g=[];for(let x of y){let E=new K(x.tabs,{keys:[{name:"title",weight:3},{name:"domain",weight:1},{name:"browser",weight:.5}],threshold:.4,includeScore:!0,ignoreLocation:!0}),A={browser:x.browser,tabs:E.search(r).map(U=>U.item)};g.push(A)}return g},[y,r]),S=(0,H.useMemo)(()=>r===""?y:m,[y,m,r]);return(0,I.jsxs)(v.List,{isLoading:l,searchBarPlaceholder:"Search tabs",onSearchTextChange:e,searchText:r,searchBarAccessory:(0,I.jsxs)(v.List.Dropdown,{storeValue:pt,tooltip:"Browser",onChange:n,children:[(0,I.jsx)(v.List.Dropdown.Item,{icon:v.Icon.Compass,title:"All",value:""}),u?.map(g=>(0,I.jsx)(v.List.Dropdown.Item,{icon:{fileIcon:g.browser.path},title:g.browser.name,value:g.browser.name},g.browser.path))]}),children:[(0,I.jsx)(v.List.EmptyView,{icon:"empty-icon.png",title:"You don't have any open tabs",description:o?`Press \u23CE to search ${r} in ${o.name}`:void 0,actions:(0,I.jsxs)(v.ActionPanel,{children:[o&&(0,I.jsx)(v.Action,{icon:{fileIcon:o.path},title:`Search in ${o.name}`,onAction:async()=>{await(0,v.open)(bt(r),o),e(""),await f()}}),(0,I.jsx)(v.Action,{icon:v.Icon.Repeat,title:"Fetch Tabs",shortcut:{modifiers:["cmd"],key:"r"},onAction:async()=>{await a(),await f()}}),(0,I.jsx)(v.ActionPanel.Section,{children:(0,I.jsx)(v.Action.Push,{title:"Setup Browser",icon:v.Icon.CheckCircle,shortcut:{modifiers:["shift","cmd"],key:"s"},target:(0,I.jsx)(we,{browserTabsMutate:f})})}),(0,I.jsx)(ae,{})]})}),S?.map(g=>g.tabs.slice(0,100).map((x,E)=>(0,I.jsx)(v.List.Item,{title:x.title,subtitle:dt?{value:x.domain,tooltip:x.url}:void 0,accessories:[{tag:g.browser.name,icon:{fileIcon:g.browser.path}}],icon:ut(x.url,{fallback:v.Icon.Link,mask:v.Image.Mask.RoundedRectangle}),actions:(0,I.jsxs)(v.ActionPanel,{children:[(0,I.jsx)(Lt,{defaultBrowser:i,browser:g.browser,tab:x,mutate:f,frontmostMutate:a,browserSetup:b}),(0,I.jsx)(ae,{})]})},x.title+E)))]})}
